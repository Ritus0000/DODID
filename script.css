/* ============================================================================
  styles (3).css — Layout + Effects
  Базовая идея: экран «зажат» между фиксированной шапкой (#header) и доком (#dock).
  Весь скролл — только внутри #tasks. Анимации мягкие, минималистичные.
============================================================================ */

:root{
  /* Палитра */
  --accent:#ffd000;          /* фирменный жёлтый (кнопки/акценты) */
  --ink:#000;                /* основной текст */
  --muted:#777;              /* вторичный текст/плейсхолдеры */
  --ring:#aaa;               /* тонкие линии/рамки */
  --brand:#8a8a8a;           /* серый для логотипа/иконок */

  /* Геометрия */
  --header-h:64px;           /* высота верхней шапки */
  --dock-h:78px;             /* высота нижней панели (без safe-area) */

  /* Клавиатура (скрипт ставит пиксели сюда) */
  --kb:0px;                  /* «вытесненная» высота: поднимаем док на это значение */

  /* Анимации */
  --pop-duration:520ms;      /* «рождение кружка» (pop-in) */
}

/* Страница «жёсткая», скролл только в области задач */
html, body {
  height:100%;
  overflow:hidden;                 /* убираем прокрутку у документа */
  overscroll-behavior:none;        /* предотвращаем «оттяжку» на десктопах */
  margin:0;
  background:#fff;
  color:var(--ink);
  font-family:"Helvetica Neue",-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial,sans-serif;
}

/* Верхняя панель (#header) и нижний док (#dock) предполагаются фиксированными.
   Если у тебя их нет — эти правила можно не подключать. */
#header, #dock{
  position:fixed;
  left:0; right:0;
  display:flex;
  align-items:center;
  background:#fff;
  z-index:10;                         /* над списком */
}

#header{
  top:0;
  height:var(--header-h);
  padding:0 16px;
  border-bottom:1px solid rgba(0,0,0,.06);
}

#dock{
  bottom:0;
  height:calc(var(--dock-h) + var(--kb)); /* +kb поднимает при клавиатуре */
  padding:0 16px;
  border-top:1px solid rgba(0,0,0,.06);
  justify-content:center;
  transition:transform .25s ease;        /* скрипт меняет transform при клавиатуре */
}

/* Прокручиваемая колонка задач занимает всё между шапкой и доком */
#tasks{
  position:absolute;
  left:0; right:0;
  top:var(--header-h);
  bottom:var(--dock-h);             /* базовая высота дока */
  overflow-y:auto;
  -webkit-overflow-scrolling:touch; /* инерция в iOS */
  padding:8px 12px;
}

/* Тонкий скроллбар показываем только в момент скролла (скрипт добавляет .scrolling) */
#tasks{ scrollbar-width:none; }
#tasks::-webkit-scrollbar{ width:3px; height:3px; }
#tasks::-webkit-scrollbar-thumb{ background-color:rgba(0,0,0,0); border-radius:2px; }
#tasks.scrolling::-webkit-scrollbar-thumb{ background-color:rgba(0,0,0,.24); }

/* Строка задачи */
#tasks li{
  position:relative;                /* нужен контекст для SVG зачёркивания */
  display:flex;
  align-items:flex-start;
  gap:10px;
  padding:10px 6px;
  font-size:18px;
  line-height:1.25;
  border-bottom:1px solid rgba(0,0,0,.04);
  transition:background .15s ease,color .2s ease; /* мягкий hover/смена тона */
}

/* Текст задачи. contenteditable управляется скриптом. */
#tasks li .text{
  flex:1 1 auto;
  outline:none;
  white-space:pre-wrap;             /* переносим строки как в заметках */
  word-break:break-word;            /* не ломаем макет длинными словами */
}

/* Пустой текст — более бледный (визуально «плейсхолдер») */
#tasks li .text.empty{
  color:var(--muted);
  opacity:.7;
}

/* Состояние «выполнено» — серый тон, но оставляем читаемость */
#tasks li.done{ color:#9aa0a6; }

/* Иконка слева — кружок + галочка. SVG позволяет чётко анимировать stroke. */
#tasks li .tick{
  width:22px;
  height:22px;
  flex:0 0 22px;
  display:block;
}
.tick-ring{
  fill:none;
  stroke:#c9c9c9;
  stroke-width:2;
}
.tick-mark{
  fill:none;
  stroke:#2f9d27;     /* зелёная галочка */
  stroke-width:2.5;
  stroke-linecap:round;
  stroke-linejoin:round;
  stroke-dasharray:18;           /* позволяет «прорисовываться» анимацией */
  stroke-dashoffset:18;          /* изначально спрятана */
  transition:stroke-dashoffset .22s ease;
}
/* Когда .done — галочка «прорисовывается» (offset → 0) */
#tasks li.done .tick-mark{ stroke-dashoffset:0; }

/* SVG-слой зачёркивания поверх текста */
#tasks li svg.strike{
  position:absolute;
  left:0; top:0;
  width:100%; height:100%;
  pointer-events:none;             /* не мешаем кликам по тексту */
}
#tasks li .strike-line{
  stroke:#8a8a8a;                  /* цвет линии зачёркивания */
  stroke-width:2;
  stroke-linecap:round;
  opacity:0;                       /* появление мягкое */
  stroke-dasharray:4 4;
  animation:strikeIn .18s ease forwards; /* плавная материализация */
}
@keyframes strikeIn{
  from{ opacity:0; }
  to  { opacity:1; }
}

/* Кнопка «плюс» в доке (примерный стиль; подстрой под свой HTML) */
#addBtn{
  appearance:none;
  border:none;
  background:var(--accent);
  color:#000;
  font-weight:700;
  border-radius:999px;
  padding:10px 16px;
  cursor:pointer;
  transition:transform .12s ease, filter .12s ease;
}
#addBtn:active{ transform:scale(.98); filter:brightness(.98); }

/* Микро-hover на строках (не агрессивный) */
#tasks li:hover{ background:rgba(0,0,0,.02); }
