:root{
  --accent:#ffd000;
  --ink:#000;
  --muted:#777;
  --ring:#aaa;
  --brand:#8a8a8a;
  --phone-w:390px; --phone-h:844px;

  --pop-duration:520ms; /* медленнее рождение кружка */
}

/* Базовая типографика и холст */
*{ box-sizing:border-box; }
html,body{ margin:0; padding:0; }
body{
  font-family:"Helvetica Neue",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Ubuntu,"Noto Sans","Apple Color Emoji","Segoe UI Emoji",sans-serif;
  color:var(--ink);
  background:#fff;
}

.wrapper{ display:flex; align-items:stretch; justify-content:center; min-height:100vh; }
.phone{ width:100%; max-width:var(--phone-w); margin:0 auto; }
.app{ position:relative; padding:24px 20px 120px; }

/* Шапка под динамический остров */
.header{ display:flex; align-items:center; gap:12px; height:44px; }
.time{ font-weight:600; letter-spacing:.3px; }
.pill{ margin-left:auto; display:flex; align-items:center; gap:8px; background:#000; color:#fff; border-radius:28px; padding:4px 10px; }
.pill .avatar{ width:22px; height:22px; border-radius:50%; display:block; }
.pill .dot{ width:8px; height:8px; border-radius:50%; background:#17e37e; }

/* Заголовок дня */
.dow{ font-family:"Fredoka", system-ui, sans-serif; font-weight:700; font-size:38px; margin:20px 0 16px; }

/* Список */
#tasks{ list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:18px; }

/* Элемент задачи */
li{ display:flex; align-items:flex-start; gap:14px; }
.circle{
  width:24px; height:24px; border-radius:50%;
  border:2px solid var(--ring); background:#fff; flex:0 0 24px;
  display:flex; align-items:center; justify-content:center;
  transition:border-color .2s ease, background .2s ease, transform .08s ease;
}
.circle.touch{ transform:scale(0.95); box-shadow: inset 0 1.5px 3px rgba(0,0,0,.25); }
.circle.born{ animation: pop var(--pop-duration) cubic-bezier(.2,.8,.2,1) forwards; transform:scale(0); }
@keyframes pop{ 0%{transform:scale(0);} 70%{transform:scale(1.14);} 100%{transform:scale(1);} }

/* Галочка — статично */
.tick{ width:14px; height:14px; display:block; }
.tick path{ fill:none; stroke:#fff; stroke-width:2.2; stroke-linecap:round; }
.done .circle{ background:var(--accent); border-color:var(--accent); }

/* Текст + placeholder с ПЛАВНЫМ появлением */
.textwrap{ position:relative; flex:1; }
.task-text{
  position:relative;
  min-height:1.25em; white-space:pre-wrap; word-break:break-word;
  outline:none; border:none; background:transparent; padding:0; margin:0;
  font-size:22px; line-height:1.35; color:var(--ink);
}
.task-text::selection{ background:rgba(255,208,0,.35); }

/* placeholder (серый) */
.placeholder{
  position:absolute; left:0; top:0;
  color:#bcbcbc; pointer-events:none;
  opacity:1; transition:opacity .25s ease;
  font-size:22px; line-height:1.35;
  padding:2px 0 4px;
}
/* Псевдо-плейсхолдер всегда есть, исчезает когда есть текст */
.hasText + .placeholder{ opacity:0; }

/* Статус выполнено — текст сереет */
li.done .task-text{ color:#999; }

/* Анимация зачёркивания через SVG (линия рисуется слева направо) */
.strike-svg{ position:absolute; left:0; top:0; width:100%; height:100%; pointer-events:none; overflow:visible; }
.strike-line{
  stroke:#000; stroke-width:2.2; stroke-linecap:round;
  stroke-opacity:.9; vector-effect:non-scaling-stroke;
  stroke-dasharray: var(--len, 20);
  stroke-dashoffset: var(--len, 20);
  transition: stroke-dashoffset .32s ease;
}
li.done .strike-line{ stroke-opacity:.45; }

/* Нижний док: бренд + FAB */
.bottomDock{
  position:fixed; right:20px;
  display:flex; align-items:center; gap:16px; z-index:10;
  bottom:calc(20px + env(safe-area-inset-bottom));
}
.brand{ font-weight:800; color:#bcbcbc; letter-spacing:.6px; }
.fab{
  width:64px; height:64px; border-radius:50%;
  border:none; outline:none; cursor:pointer;
  background:var(--accent); color:#fff; font-size:32px; line-height:1;
  box-shadow: 0 8px 28px rgba(0,0,0,.2);
  display:flex; align-items:center; justify-content:center;
  transition: transform .08s ease, box-shadow .2s ease;
}
.fab:active{ transform:translateY(1px); box-shadow: 0 6px 18px rgba(0,0,0,.18); }

/* ===== Safari text-decoration fix & strike alignment override ===== */
.task-text { text-decoration: none; -webkit-text-decoration-skip: none; }
li.done .task-text { text-decoration: none; }
.textwrap { position: relative; } /* container for strike-svg */

/* ==== Viewport & keyboard-safe layout (iOS Safari) ==== */
html, body { height: 100%; }
body { overscroll-behavior-y: none; overflow: hidden; }

.wrapper, .phone {
  height: var(--appH, 100dvh);
  min-height: var(--appH, 100dvh);
}

/* Keep content clear of the bottom toolbar + keyboard */
.app {
  padding-bottom: calc(24px + env(safe-area-inset-bottom) + var(--kb-offset, 0px));
}

.bottomDock {
  bottom: calc(20px + env(safe-area-inset-bottom) + var(--kb-offset, 0px)) !important;
}

/* Optional: keep header visually anchored under the notch */
.header {
  position: sticky;
  top: calc(env(safe-area-inset-top));
  background:#fff;
  z-index: 5;
}
